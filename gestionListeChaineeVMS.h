//#########################################################
//#
//# Titre : 	TP3
//#
//# Auteur : 	Miriam Davydov et Harvé Leka
//#	Date :	21 décembre 2021
//#
//# Langage : 	ANSI C on LINUX 
//#
//#######################################

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <semaphore.h>
#include <pthread.h>
#include <unistd.h>
#include <curses.h>

#define RESPONSE_SIZE 1000

struct infoVM{						
	int		noVM;
	unsigned char 	busy; 
	unsigned short * 	ptrDebutVM;							
	};								 

struct noeudVM{			
	struct infoVM	VM;		
	struct noeudVM	* suivant;	
	sem_t semNoeud; // Each VM has a semaphore
};

struct dataForTransactions {
	int noVM;
	char nomfich[100];
	int nstart;
	int nend;
	char response[RESPONSE_SIZE];
};

void cls(void);
void error(const int exitcode, const char * message);

struct noeudVM * findItem(const int no);
struct noeudVM * findPrev(const int no);

void addItem(struct dataForTransactions * data);
void removeItem(struct dataForTransactions * data);
void listItems(struct dataForTransactions * data);
void saveItems(const char* sourcefname);

const char* readTrans(char* raw_transaction);
